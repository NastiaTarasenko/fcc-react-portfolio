import{s as S,c as y,S as _,B as x,r as i,u as p,a as g,j as e,d as k,e as C,f as W,g as N}from"./index-Ddeljrop.js";import{M as L}from"./Menu-mf5H3I4U.js";const b={[x]:{lengthSelector:t=>t.clock.breakLength,setLength:y},[_]:{lengthSelector:t=>t.clock.sessionLength,setLength:S}},T="_title_18y59_1",v="_container_18y59_37",B="_settingsWrapper_18y59_69",$="_parametersWrapper_18y59_79",E="_btn_18y59_91",I="_duration_18y59_123",O="_durationControls_18y59_133",H="_timerWrapper_18y59_145",M="_timerLabel_18y59_165",w="_timeLeft_18y59_179",F="_controlsWrapper_18y59_193",A="_controlsBtn_18y59_205",r={title:T,container:v,settingsWrapper:B,parametersWrapper:$,btn:E,duration:I,durationControls:O,timerWrapper:H,timerLabel:M,timeLeft:w,controlsWrapper:F,controlsBtn:A},j=i.memo(({type:t})=>{const{lengthSelector:a,setLength:n}=b[t],o=p(h=>h.clock.runTimer),c=p(a),s=g(),l=()=>{o||s(n(c===1?60:c-1))},m=()=>{o||s(n(c===60?1:c+1))};return e.jsxs("div",{children:[e.jsxs("p",{id:t===x?"break-label":"session-label",children:[t," Length"]}),e.jsxs("div",{className:r.parametersWrapper,children:[e.jsx("button",{className:`${r.btn} ${r.durationControls}`,onClick:l,children:"–"}),e.jsx("p",{className:r.duration,children:c}),e.jsx("button",{className:`${r.btn} ${r.durationControls}`,onClick:m,children:"+"})]})]})}),D=({soundRef:t,updateTimeoutRef:a,timeLeft:n,setTimeLeft:o})=>{const c=p(u=>u.clock.currentTimer),s=p(u=>u.clock.runTimer),l=i.useRef(null),m=g();i.useEffect(()=>(s?l.current=setInterval(()=>{o(u=>u>0?u-1:0)},1e3):(clearInterval(l.current),l.current=0),()=>clearInterval(l.current)),[s,c,o]),i.useEffect(()=>{n===0&&s&&t.current&&(t.current.currentTime=0,t.current.play(),m(k(!1)),a.current=setTimeout(()=>{m(C());const u=W.getState().clock,f=u.currentTimer===_?u.sessionLength:u.breakLength;o(f*60),t.current.pause()},5500))},[n,s,t,m,a,o]);const h=Math.floor(n/60),d=n%60;return e.jsxs("div",{className:r.timerWrapper,children:[e.jsx("p",{className:r.timerLabel,children:c}),e.jsxs("p",{className:r.timeLeft,style:{color:n<60?"#d9111f":"inherit"},children:[h<10?`0${h}`:h,":",d<10?`0${d}`:d]})]})},K=i.memo(({updateTimeoutRef:t,soundRef:a,setTimeLeft:n})=>{const o=p(m=>m.clock.runTimer),c=g(),s=()=>{c(k(!o))},l=i.useCallback(()=>{a.current&&(a.current.currentTime=0,a.current.pause()),c(N()),t.current&&(clearTimeout(t.current),t.current=null),n(1500)},[c,a,t,n]);return i.useEffect(()=>()=>{l()},[l]),e.jsxs("div",{className:r.controlsWrapper,children:[e.jsx("button",{className:`${r.btn} ${r.controlsBtn}`,onClick:s,children:"Start/Stop"}),e.jsx("button",{className:`${r.btn} ${r.controlsBtn}`,onClick:l,children:"Reset"})]})}),G=()=>{const t=i.useRef(null),a=i.useRef(null),n=p(l=>l.clock.currentTimer),o=p(b[n].lengthSelector),[c,s]=i.useState(o*60);return i.useEffect(()=>{s(o*60)},[o,n]),e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsxs("h1",{className:r.title,children:[e.jsx("span",{children:"✦"})," 25 + 5 Clock ",e.jsx("span",{children:"✦"})]}),e.jsxs("div",{className:r.container,children:[e.jsxs("div",{className:r.settingsWrapper,children:[e.jsx(j,{type:x}),e.jsx(j,{type:_})]}),e.jsx(D,{soundRef:t,updateTimeoutRef:a,timeLeft:c,setTimeLeft:s}),e.jsx(K,{updateTimeoutRef:a,soundRef:t,setTimeLeft:s}),e.jsx("audio",{ref:t,src:"/clock-sound.wav"})]})]})};export{G as default};
